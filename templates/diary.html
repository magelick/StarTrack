{% extends 'base.html' %}

{% block title %}
Дневник ребенка
{% endblock %}

{% block content %}
<div class="diary-container">
  <h2>Дневник ребенка: {{ child.name }}</h2>

  <!-- Обертка для форм -->
  <div class="form-wrapper">
    <!-- Форма для расчета восстановления -->
    <div class="recovery-container">
      <h3>Оценка восстановления</h3>
      <form method="POST" action="{{ url_for('calculate_recovery') }}" class="recovery-form">
        <div class="form-group">
          <label for="rhr">Пульс в покое (уд/мин):</label>
          <input type="number" id="rhr" name="rhr" step="1" min="30" max="200" required>
        </div>

        <div class="form-group">
          <label for="standing_heart_rate">Пульс стоя (уд/мин):</label>
          <input type="number" id="standing_heart_rate" name="standing_heart_rate" step="1" min="30" max="200" required>
        </div>

        <button type="submit" class="btn-submit">Сохранить</button>
      </form>
    </div>
    <!-- Форма для записи роста и массы -->
    <div class="form-section">
      <h3>Оценка развития</h3>
      <form method="POST" action="{{ url_for('diary', child_id=child.id) }}" class="diary-form">
        <div class="form-group">
          <label for="standing_height">Рост стоя (см):</label>
          <input type="number" id="standing_height" name="standing_height" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="sitting_height">Рост сидя (см):</label>
          <input type="number" id="sitting_height" name="sitting_height" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="body_mass">Масса тела (кг):</label>
          <input type="number" id="body_mass" name="body_mass" step="0.01" required>
        </div>

        <button type="submit" class="btn-submit">Сохранить</button>
      </form>
    </div>
  </div>

  <!-- Результаты -->
  <div class="results-container">
    <!-- Бокс для результатов пульса -->
    <div class="result-box">
      <h3>Текущее восстановление</h3>
      <p id="pulse-results">
        <!-- Здесь будут отображаться результаты пульса -->
        {% if pulse_results %}
      <p><strong>Пульс в покое:</strong> {{ pulse_results.resting_heart_rate }} уд/мин</p>
      <p><strong>Пульс стоя:</strong> {{ pulse_results.standing_heart_rate }} уд/мин</p>
      {% else %}
      {% endif %}
      </p>
      <!-- Записи дневника пульса -->
      {% if pulse_entries %}
      <ul class="diary-entries">
        {% for entry in pulse_entries %}
        <li>
          <strong>{{ entry.date.strftime('%d.%m.%Y') }}:</strong> {{ entry.feedback }}
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p>Записей дневника пульса нет.</p>
      {% endif %}
    </div>

    <!-- Бокс для информации о подростковом возрасте -->
    <div class="result-box">
      <h3>Текущее развитие</h3>
      {% if adolescence_info %}
      <p><strong>Текущий возраст:</strong> {{ adolescence_info.current_age }} лет</p>
      <p><strong>Начало подросткового возраста:</strong> {{ adolescence_info.start_age }} лет</p>
      <p><strong>Пик подросткового возраста:</strong> {{ adolescence_info.peak_age }} лет</p>
      <p><strong>Окончание подросткового возраста:</strong> {{ adolescence_info.end_age }} лет</p>
      </ul>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
